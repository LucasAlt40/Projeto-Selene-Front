<main class="flex items-center justify-center px-6 md:p-0">
  <form
    [formGroup]="registerForm"
    (ngSubmit)="onSubmit()"
    class="w-[600px] w-sm-full flex flex-col flex-wrap gap-3"
  >
    <h3 class="text-lg text-center">Criar conta</h3>

    <p-iftalabel>
      <input
        id="email"
        type="text"
        pSize="small"
        pInputText
        formControlName="email"
        placeholder="ex: example@gmail.com"
        class="w-full"
        [ngClass]="
          registerForm.get('email')?.invalid &&
          registerForm.get('email')?.touched
            ? 'ng-dirty ng-invalid'
            : undefined
        "
      />
      <label for="email">Email</label>
      @if ( registerForm.get('email')?.invalid &&
      registerForm.get('email')?.touched) {
      <div class="text-red-500 text-sm mt-1">
        @if(registerForm.get('email')?.errors?.['email']) { Email inválido. }
        @if(registerForm.get('email')?.errors?.['required']) { Email é
        obrigatório. }
      </div>
      }
    </p-iftalabel>

    <p-iftalabel>
      <input
        id="name"
        type="text"
        pSize="small"
        pInputText
        formControlName="name"
        placeholder="ex: Maria Silva"
        class="w-full"
        [ngClass]="
          registerForm.get('name')?.invalid && registerForm.get('name')?.touched
            ? 'ng-dirty ng-invalid'
            : undefined
        "
      />
      <label for="name">Nome Completo</label>
      @if ( registerForm.get('name')?.invalid &&
      registerForm.get('name')?.touched) {
      <div class="text-red-500 text-sm mt-1">
        @if(registerForm.get('name')?.errors?.['required']) { Nome completo é
        obrigatório. }
      </div>
      }
    </p-iftalabel>

    <p-iftalabel>
      <p-input-mask
        id="document"
        formControlName="document"
        placeholder="000.000.000-00"
        mask="999.999.999-99"
        appInputValidation
        class="w-full"
        [ngClass]="
          registerForm.get('document')?.invalid &&
          registerForm.get('document')?.touched
            ? 'ng-dirty ng-invalid'
            : undefined
        "
      />
      <label for="document">CPF</label>
      @if ( registerForm.get('document')?.invalid &&
      registerForm.get('document')?.touched) {
      <div class="text-red-500 text-sm mt-1">
        @if(registerForm.get('document')?.errors?.['invalidCPF']) { CPF
        inválido. } @if(registerForm.get('document')?.errors?.['required']) {
        CPF é obrigatório. }
      </div>
      }
    </p-iftalabel>

    <p-iftalabel>
      <p-input-mask
        id="phone"
        formControlName="phone"
        placeholder="(99) 99999-9999"
        mask="(99) 99999-9999"
        class="w-full"
        [ngClass]="
          registerForm.get('phone')?.invalid &&
          registerForm.get('phone')?.touched
            ? 'ng-dirty ng-invalid'
            : undefined
        "
      />
      <label for="phone">Telefone</label>
      @if ( registerForm.get('phone')?.invalid &&
      registerForm.get('phone')?.touched) {
      <div class="text-red-500 text-sm mt-1">
        @if(registerForm.get('phone')?.errors?.['required']) { Telefone é
        obrigatório. }
      </div>
      }
    </p-iftalabel>

    <p-iftalabel>
      <p-password
        id="password"
        formControlName="password"
        placeholder="***"
        [feedback]="false"
        styleClass="w-full"
        [ngClass]="
          registerForm.get('password')?.invalid &&
          registerForm.get('password')?.touched
            ? 'ng-dirty ng-invalid'
            : undefined
        "
      />
      <label for="password">Senha</label>
      @if ( registerForm.get('password')?.invalid &&
      registerForm.get('password')?.touched) {
      <div class="text-red-500 text-sm mt-1">
        @if(registerForm.get('password')?.errors?.['required']) { Senha é
        obrigatória. }
      </div>
      }
    </p-iftalabel>

    <p-iftalabel>
      <p-password
        id="confirmPassword"
        formControlName="confirmPassword"
        placeholder="***"
        [feedback]="false"
        styleClass="w-full"
        [ngClass]="
          registerForm.get('confirmPassword')?.invalid &&
          registerForm.get('confirmPassword')?.touched
            ? 'ng-dirty ng-invalid'
            : undefined
        "
      />
      <label for="confirmPassword">Confirmação de Senha</label>
      @if (registerForm.get('confirmPassword')?.invalid &&
      registerForm.get('confirmPassword')?.touched) {
      <div class="text-red-500 text-sm mt-1">
        @if(registerForm.get('confirmPassword')?.errors?.['required']) {
        Confirmação de senha é obrigatória }
      </div>
      } @if (registerForm.hasError('passwordMismatch') &&
      registerForm.get('confirmPassword')?.touched) {
      <div class="text-red-500 text-sm mt-1">As senhas não coincidem</div>
      }
    </p-iftalabel>

    <p-button
      size="small"
      type="submit"
      label="Criar conta"
      styleClass="w-full"
    />

    <div>
      <div class="relative flex items-center justify-center mb-3">
        <div
          class="absolute inset-x-0 h-px bg-gray-300 top-1/2 transform -translate-y-1/2"
        ></div>
        <p
          class="relative z-10 bg-white px-2 text-sm text-center text-gray-500"
        >
          Não tem uma conta?
        </p>
      </div>

      <a
        routerLink="/login"
        severity="secondary"
        size="small"
        class="w-full"
        pButton
      >
        <span pButtonLabel>Acessar conta</span>
      </a>
    </div>
  </form>
</main>
